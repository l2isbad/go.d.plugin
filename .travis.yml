---
language: go
go:
  - 1.11

env:
  - GO111MODULE=on

stages:
- build
- name: release
  if: tag =~ ^v

jobs:
  include:
  - stage: build
    name: lint & test & build
    install: sudo apt-get install -y gcc
    script: make all
  - stage: release
    name: publish release artifacts
    install: sudo apt-get install -y gcc
    script:
      - make release
      - .travis/publisher.sh
